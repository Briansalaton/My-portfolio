"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[79792],{3353:(e,t,r)=>{r.d(t,{J:()=>c});var a=r(532850),n=r(360662),l=r(50042),o=r(655515),i=r(119349),s=r(981278),d=r(455729);let{shutterstockBaseUrl:u}=(0,o.K)(),c=e=>{var t;let{couponCode:r,displayInlineCancellationFlow:o,additionalQueryParams:c={}}=e,v=(0,s.useRouter)(),p=(0,n.Q)(),m=!!(null==p||null==(t=p.current)?void 0:t.isPeacock);return(0,d.useCallback)(e=>{let{orderId:t}=e,n=(0,i.BF)({language:v.locale,baseUrl:u,pathname:(0,l.DG)({queryParams:{orderId:t,...c,...(null==v?void 0:v.query)||{},...m&&{isCreativeAiOrder:"true"},...r?{[a.m]:r,[a.AW]:r}:{},...o&&{display:"inlineCancellationFlow"}}})});window.location=n},[r,m,v,o,c])}},56979:(e,t,r)=>{r.d(t,{$:()=>s});var a=r(487519),n=r(183014),l=r(531950),o=r(884378);let i=e=>{let{queryParams:t}=e;return(0,a.uy)({queryParams:t}).formattedUrl},s=function(){let{queryParams:e={},shouldFetch:t=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,n.P)(t?i({queryParams:e}):null,e=>l.Bn.get(e).then(e=>(0,o.A)(e.data)))}},66707:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>w});var a=r(406029),n=r(464839),l=r(215075),o=r(926114),i=r(811401),s=r(513372),d=r(727326),u=r(532850),c=r(882431),v=r(911449),p=r(461266),m=r(568880),h=r(455729);let b=(0,r(807703).n9)()(()=>({buttonProgress:{position:"absolute"}})),y=e=>{let{t}=e;return{buyAndDownload:t("activation-drawers:pricing_checkout_download_label")}},f=e=>{let{product:t,selectedProductLicenseType:r}=e,{license:a}=r,{name:n}=t;return a&&n?`${d.lnH} - ${a}License - ${n}`:d.lnH},w=e=>{let{classes:t=p.vB,asset:r,assetSize:d,couponCode:w="",isDisabled:N=!1,product:C,productType:g=u.PZ,selectedShadowsOption:P,selectedProductLicenseType:x=p.vB,setCreateOrderStatus:A=p.lQ,vatNumber:_,labelText:D,className:k}=e,[I,B]=(0,h.useState)(!1),{classes:L,cx:O}=b(),{t:E,ready:U}=(0,m.Bd)(o.sVY),F=y({t:E}),{license:T}=x,{createOrderHandler:j,isCreateOrderInProgress:S}=(0,v.s)({orderFlow:c.Y.IMAGE_DOWNLOAD_PANEL,asset:r,assetSize:d,couponCode:w,productOverride:C,productType:g,vatNumber:_,setCreateOrderStatus:A,license:T,selectedShadowsOption:P,isLicenseDrawer:!0}),M=S||!U||N||!I,z=f({product:C,selectedProductLicenseType:x});return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(i.l,{asset:r,isTermsChecked:I,setTermsCheckbox:B}),(0,a.jsxs)(s.$n,{className:O(L.buyAndDownloadButton,t.buyAndDownloadButton,k),"aria-label":D||F.buyAndDownload,variant:"contained",color:"secondary",onClick:j,fullWidth:!0,disabled:M,labelTrack:z,children:[S&&(0,a.jsx)(n.A,{color:"inherit",size:24,className:O(L.buttonProgress,t.buyAndDownloadButton)}),D||(U?F.buyAndDownload:(0,a.jsx)(l.A,{variant:"text",width:"100%"}))]})]})}},262139:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>C,getAnalyticsLabel:()=>N});var a=r(406029),n=r(464839),l=r(215075),o=r(926114),i=r(291753),s=r(517596),d=r(811401),u=r(513372),c=r(727326),v=r(532850),p=r(882431),m=r(911449),h=r(461266),b=r(568880),y=r(455729);let f=(0,r(807703).n9)()(e=>{let{tokens:{spacing:t}}=e;return{buttonProgress:{position:"absolute"},downloadButton:{marginTop:t.base}}}),w=e=>{let{t}=e;return{buyAndDownload:t("activation-drawers:pricing_checkout_download_label")}},N=e=>{let{product:t,selectedProductLicenseType:r,hasActiveMembershipSub:a}=e,{license:n}=r,{name:l}=t;if(n&&l){let e=`${c.lnH} - ${n}License - ${l}`;return`${a?`${e} - ${i.jQ}`:e}`}return c.lnH},C=e=>{let{asset:t,assetSize:r,couponCode:C="",isDisabled:g=!1,product:P,productType:x=v.PZ,selectedProductLicenseType:A=h.vB,setCreateOrderStatus:_=h.lQ,selectedShadowsOption:D,vatNumber:k,eligibilityData:I=h.vB,labelText:B,membershipProps:L=h.vB}=e,{isEligibleForEnhanceLicensingSingleAsset:O}=(0,s.r)(),{classes:E}=f(),[U,F]=(0,y.useState)(!1),{t:T,ready:j}=(0,b.Bd)(o.sVY),S=w({t:T}),{license:M}=A,{hasActiveMembershipSub:z}=L,{createOrderHandler:$,isCreateOrderInProgress:R}=(0,m.s)({orderFlow:p.Y.LICENSING_DRAWER,asset:t,assetSize:r,couponCode:C,productOverride:P,productType:x,vatNumber:k,setCreateOrderStatus:_,selectedShadowsOption:D,license:M,isLicenseDrawer:!0,eligibilityData:I}),Y=R||!j||g||!U,G=O?c.Bni:N({product:P,selectedProductLicenseType:A,hasActiveMembershipSub:z}),H=z?i.DB:B;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(d.l,{asset:t,isTermsChecked:U,setTermsCheckbox:F}),(0,a.jsxs)(u.$n,{"aria-label":H||S.buyAndDownload,"data-automation":`${H||c.lnH}_button`,variant:"contained",color:"secondary",onClick:$,fullWidth:!0,disabled:Y,labelTrack:G,className:E.downloadButton,children:[R&&(0,a.jsx)(n.A,{color:"inherit",size:24,className:E.buttonProgress}),H||(j?S.buyAndDownload:(0,a.jsx)(l.A,{variant:"text",width:"100%"}))]})]})}},291753:(e,t,r)=>{r.d(t,{DB:()=>u,TE:()=>p,a_:()=>c,ay:()=>i,cy:()=>d,e7:()=>s,jQ:()=>v,lY:()=>n,rY:()=>o,vB:()=>l});var a=r(315888);let n="LICENSING",l="LOADING",o="PURCHASING",i="none",s={[a.zWM]:2,[a.InX]:5,[a.gtC]:25,[a.W_1]:2,[a.HCH]:5,[a.xh8]:25},d="Download for free",u="Download",c="Tier100",v="NonTier100",p="eligibilityErrorNoEligibility"},346504:(e,t,r)=>{r.d(t,{JA:()=>b,Up:()=>p,Z0:()=>m,bV:()=>w,dV:()=>h,eb:()=>y,kI:()=>v,mk:()=>f,wb:()=>u});var a=r(9549),n=r(485650),l=r(831664),o=r(581298),i=r(302168),s=r(198795),d=r(455729);let u=e=>{let{prices:t}=e,{currencyData:{currency:r=a.OS}}=(0,o.Y)();return(0,i.zn)({prices:t,localeCurrency:r})},c=e=>{let{basePrice:t,pricePerSeat:r,seatCount:a}=e;return t?t+r*a:NaN},v=e=>{let{product:t}=e,{prices:r={},pricesPerSeat:a={},seatCount:n,downloadCredits:l,commitmentLength:o,id:i}=t,d=u({prices:r}),v=r[null==d?void 0:d.toLowerCase()]??NaN,p=a[null==d?void 0:d.toLowerCase()]??NaN,m=v,h=l&&1===o?12*l:l||1;return"17438"!==i||l||(h=2),p&&n&&(m=c({basePrice:v,pricePerSeat:p,seatCount:n})),(0,s.f)(m/h,d)??void 0},p=e=>{let{product:t,promotion:r=0}=e,{prices:a={},pricesPerSeat:n={},seatCount:l}=t||{},o=u({prices:a}),i=a[null==o?void 0:o.toLowerCase()]??NaN,d=n[null==o?void 0:o.toLowerCase()],v=i;return r>0&&(v=Math.round(i*(1-r))),d&&l&&(v=c({basePrice:i,pricePerSeat:d,seatCount:l})),(0,s.f)(v,o)},m=e=>{var t,r,a,n;let{activeTab:o,productGroup:i,productToCompare:d=l.XN}=e,{prices:c}={prices:{}},v=u({prices:c}),{products:p={}}=i,m=p[o],h=12*((null==m||null==(r=m[d])||null==(t=r.prices)?void 0:t[null==v?void 0:v.toLowerCase()])??NaN)-((null==m||null==(n=m[l.Ww])||null==(a=n.prices)?void 0:a[null==v?void 0:v.toLowerCase()])??NaN),b=(0,s.f)(h,v);return h>0?b:null},h=e=>{let{price:t,product:r}=e,{prices:a}=r,n=u({prices:a});return(0,s.f)(t,n)},b=e=>{let{product:t,downloadsPerMonth:r,discountPercentage:a=0,selectedProductLicenseType:l=""}=e,o=u({prices:(null==t?void 0:t.prices)??{}}),{pricePerPaymentInterval:c,pricePerMonth:v,pricePerAsset:p,pricePerAssetDiscounted:m,priceDiscounted:h}=(0,d.useMemo)(()=>{var e;let s=(0,i.f8)({product:t??{}}),d=(0,i.Eu)({product:t}),u=l===n.ZI1,c=2*!["KRW","JPY"].includes(o),v=(0,i.Fj)({product:t??{}}),p=v&&!d?12:1,m=(null==t||null==(e=t.prices)?void 0:e[o.toLowerCase()])??NaN,h=m-m/100*a,b=v?(m/12).toFixed(c):m,y=u?((null==t?void 0:t.allotmentCredits)||0)/20:(null==t?void 0:t.allotmentCredits)??NaN,f=(m/p/((s?y:null==t?void 0:t.allotmentCredits)??NaN)).toFixed(c),w=a?(h/p/((null==t?void 0:t.allotmentCredits)??r??NaN)).toFixed(c):f;return{priceDiscounted:h,pricePerMonth:b,pricePerAsset:f,pricePerAssetDiscounted:w,pricePerPaymentInterval:m}},[o,r,t,a,l]);return{pricePerAsset:p,formattedPricePerPaymentInterval:(0,s.f)(c,o),formattedPricePerMonth:(0,s.f)(v,o),formattedPricePerAsset:(0,s.f)(p,o),formattedPricePerAssetDiscounted:(0,s.f)(m,o),formattedPriceDiscounted:(0,s.f)(h,o)}},y=e=>{var t;let{product:r,singleClipProduct:a}=e,{prices:n,allotmentCredits:l}=r,o=u({prices:n}),i=n[o.toLowerCase()]??NaN,d=(null==a||null==(t=a.prices)?void 0:t[o.toLowerCase()])??NaN,c=(i/(l??NaN)).toFixed(2),v=((d-parseFloat(c))*(l??NaN)).toFixed(0);return{formattedPackagePrice:(0,s.f)(i,o),formattedPricePerAsset:(0,s.f)(c,o),formattedSaveAmount:(0,s.f)(v,o)}},f=e=>{let{product:t,itemCount:r=1}=e,a=u({prices:(null==t?void 0:t.prices)||{}}),n=(null==t?void 0:t.prices[null==a?void 0:a.toLowerCase()])??NaN,l=p({product:t}),o=n/r;return{originalPrice:n,formattedPrice:l,pricePerItem:(0,s.f)(o.toFixed(2),a),pricePerItemRaw:o}},w=e=>{let{prices:t={},commitmentRemaining:r=0}=e,a=u({prices:t}),n=t[null==a?void 0:a.toLowerCase()]??NaN;return{monthlyPrice:(0,s.f)(n,a),totalRemainingPrice:(0,s.f)(n*r,a)}}},426774:(e,t,r)=>{r.d(t,{l:()=>n});var a=r(651642).Buffer;let n=e=>{let t=JSON.stringify(e);return a.from(t).toString("base64")}},517596:(e,t,r)=>{r.d(t,{Y:()=>n,r:()=>l});var a=r(455729);let n=(0,a.createContext)({isEligibleForEnhanceLicensingSingleAsset:!1}),l=()=>(0,a.useContext)(n)},808059:(e,t,r)=>{r.d(t,{kN:()=>d,h6:()=>v,Cw:()=>c});var a=r(406029),n=r(467889);let l=e=>(0,n.y)()(t=>({...e,actions:{setStates:e=>t(t=>({...t,...e})),setState:(e,r)=>t(t=>({...t,[e]:r}))}}));var o=r(455729),i=r(565317);let s=(0,o.createContext)(null),d=e=>{let{children:t,initialState:r}=e,[n]=(0,o.useState)(()=>l(r));return(0,a.jsx)(s.Provider,{value:n,children:t})},u=e=>{let t=(0,o.useContext)(s);if(!t)throw Error("useConversionPanelStore must be used within CounterStoreProvider");return(0,i.P)(t,e)},c=e=>u(t=>t[e]),v=()=>u(e=>e.actions)},811401:(e,t,r)=>{r.d(t,{l:()=>v});var a=r(406029),n=r(571024),l=r.n(n);let o=l()(()=>r.e(44103).then(r.bind(r,639846)).then(e=>({default:e.EditorialTerms})),{loadableGenerated:{webpack:()=>[639846]},ssr:!1});var i=r(215075);let s=l()(()=>r.e(56895).then(r.bind(r,725831)).then(e=>({default:e.GeneratedAssetTerms})),{loadableGenerated:{webpack:()=>[725831]},ssr:!1,loading:()=>(0,a.jsx)(i.A,{height:"126px",variant:"rectangular",sx:{marginTop:"8px"}})});var d=r(498917),u=r(580030),c=r(455729);let v=e=>{let{asset:t,isTermsChecked:r=!1,setTermsCheckbox:n,showContributorDetails:l=!0}=e,i=(0,u.OK)(t),v=(0,d.iu)(t);return((0,c.useEffect)(()=>{i||v||n(!0)},[i,v,n]),i)?(0,a.jsx)(o,{asset:t,isTermsChecked:r,onCheckboxChange:n,showContributorDetails:l}):v?(0,a.jsx)(s,{isTermsChecked:r,onCheckboxChange:n}):null}},911449:(e,t,r)=>{r.d(t,{s:()=>M});var a=r(315888),n=r(648973),l=r(754725),o=r(969185),i=r(705992),s=r(353420),d=r(532850),u=r(581298),c=r(664029),v=r(935271),p=r(302168),m=r(559044),h=r(903074),b=r(30721);let y=e=>{let{asset:t,productName:r,isBogoPromotionActive:n=!1}=e,l=(0,h.J)(),o=(0,b.i9)(),i=(0,m.sY)(t);return((null==l?void 0:l.isFBA)||!o)&&!i&&n&&r===a.uyi};var f=r(426774),w=r(529862),N=r(262593),C=r(56979),g=r(3353),P=r(346504),x=r(120638),A=r(293733),_=r(377981),D=r(819254),k=r(631549),I=r(586694),B=r(323982),L=r(524335),O=r(962316);let{NODE_CONFIG_ENV:E}=r(929143).env,U=()=>{let e=(0,O.NF)()?"production":"qa";switch(E||e){case"dev":return"65021";case"qa":return"12424";case"production":return"14156";default:return"NO_ENV_DEFINED"}};var F=r(811407),T=r(946887),j=r(981278),S=r(455729);let M=e=>{let{products:t,asset:r,assetSize:h,couponCode:O,productId:E,productType:M=d.PZ,productOverride:z,seatCount:$,setCreateOrderStatus:R,setIsInvalidCoupon:Y,vatNumber:G,license:H,isLicenseDrawer:W=!1,preset:Z,eligibilityData:J={},existingUserRedirectPath:V,selectedShadowsOption:K,shouldForceAsset:q=!1,subscriptionIdentifier:Q,cancellationReason:X,additionalCheckoutQueryParams:ee,orderFlow:et,checkoutAction:er}=e,{region:ea}=(0,u.Y)(),{isIndiaRegion:en}=(0,A.Z)(),{data:el}=(0,b.rA)(),{data:eo}=(0,k.J)(),ei=(0,b.i9)(),es=(0,D.o)(),[ed,eu]=(0,S.useState)(!1),[,ec]=(0,B.p4)(r)||[],{eligibilityCurrency:ev,debitableIdentifier:ep}=J,em=(0,I.Jz)()||(0,F.vb)(),{checkGate:eh}=(0,L.U)(),eb=(0,S.useMemo)(()=>z??{...(0,p.eO)(t,E),...$?{seatCount:$}:{}},[z,E,t,$]),ey=null==eb?void 0:eb.id,{asPath:ef}=(0,j.useRouter)(),ew=(0,P.wb)({prices:(null==eb?void 0:eb.prices)??{}}),{data:eN}=(0,C.$)({shouldFetch:!!ei}),eC=y({asset:r,productName:eb.name}),eg=O||eb.couponCode,eP=(0,x.Rt)({cookies:void 0,signUpView:void 0,queryParams:{landing_page:(0,N.$)({couponCode:eg,productId:ey,vatNumber:G,seatCount:null==eb?void 0:eb.seatCount,doNotRedirect:!0,asset:en||q?r:void 0,existingUserRedirect:V||ec,license:H,additionalGenerateCheckoutParams:ee,promotions:null==eb?void 0:eb.promotions}),...Z&&{preset:Z}}}),ex=(0,S.useCallback)(()=>{if(window){var e,t;T.A.set(l.uc,ef),null==(t=window.NREUM)||null==(e=t.addPageAction)||e.call(t,"UP3-1623 assign loggedOutHandler authRedirectPath to href",{...window.location||{},asPath:ef,authRedirectPath:eP}),window.location.href=eP}},[ef,eP]),eA=(0,v.Z5)({paymentProfiles:eN}),e_=(0,S.useCallback)(e=>{var t,r;let a={createTime:null==el?void 0:el.createTime,component:"useCreateOrder.js",errorCode:e.code,errorStatus:e.status,errorDetail:e.detail,errorMessage:e.message,errorStack:e.stack||"useCreateOrder",errorTitle:e.title,impersonatorId:null==eo?void 0:eo.impersonatorId,msg:"UP1-2650 Order creation failed",organizationId:null==el?void 0:el.organizationId,referrerPath:window.location.pathname,referrerQuery:window.location.search,userId:null==el?void 0:el.id,username:null==el?void 0:el.username,isLicenseDrawer:W};null==(r=window.NREUM)||null==(t=r.noticeError)||t.call(r,e,a)},[eo,el,W]),eD=(0,g.J)({additionalQueryParams:{...ee,...er&&{checkoutAction:er}},couponCode:eg}),ek=(0,_.h)(),[eI,eB]=(0,S.useState)({status:"",error:void 0}),eL=(0,S.useCallback)(async()=>{try{if(null==R||R({status:"",error:void 0}),eB({status:"",error:void 0}),eu(!0),eN){let e=r?{assets:[{asset:r,selectedAssetSize:(0,c.aZ)({assetType:(0,m.f0)(r),assetSize:h})}]}:{},t=[];t.push({...e,product:eb,productType:M});let l=eb.name===a.rVp,d=eh(o.gx),u=l&&d?(0,f.l)(s.ju[a.rVp]):void 0;null!=X&&null!=Q&&t.push({product:{id:U(),type:"products"},cancellationReason:X,subscriptionIdentifier:Q});let{headers:p}=(0,w.H)({trackingId:em,headers:{[i.DF]:es}})||{},{data:b}=await (0,v.fS)({country:ea,currency:ev||ew,paymentProfileId:null==eA?void 0:eA.paymentId,orderItems:t,selectedShadowsOption:K,vatNumber:G,couponCode:eg,promotions:(null==eb?void 0:eb.promotions)??u,license:H,debitableIdentifier:ep,configs:{headers:p},isEligibleForUnlimitedBogoPromotion:eC,isFootageSelect:!!r&&(0,m.ex)(r)});ek({actionName:"convert - order creation success",customAttributes:{productName:eb.name,productType:M,country:ea,currency:ev||ew,assetType:(0,m.f0)(r),assetSize:h,license:H,isLicenseDrawer:W,orderFlow:et,couponCode:eg,orderId:b.id}}),null==R||R({status:n.qO,error:void 0}),eB({status:n.qO,error:void 0}),eu(!1),eD({orderId:b.id})}eu(!1)}catch(t){var e;null==R||R({status:n.Nz,error:t}),eB({status:n.Nz,error:t}),eu(!1),(null==t||null==(e=t.detail)?void 0:e.toLowerCase())===d.s_&&(null==Y||Y(!0)),e_(t)}},[R,eN,r,h,eb,M,eh,X,Q,em,es,ea,ev,ew,null==eA?void 0:eA.paymentId,K,G,eg,H,ep,eC,ek,W,et,eD,e_,Y]);return{createOrderHandler:ei?eL:ex,isCreateOrderInProgress:ed,product:eb,orderStatus:eI,createOrderHandlerLoading:ei&&!eN}}},935271:(e,t,r)=>{r.d(t,{NM:()=>_,fS:()=>x,Z5:()=>C});var a=r(487519),n=r(914689),l=r(315888),o=r(392684),i=r(532598),s=r(338436),d=r(813631),u=r(532850),c=r(398426);let v=function(e){let t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],[a]=e,{media:n,...o}=a,i=(null==n?void 0:n[0])||{};switch(i.type){case d.W1:t=`${l.lcL}-var-0004`;break;case d.FY:t=c.eJ;break;case d.M9:t=c.Xs;break;case d.G_:t=l.t8m[i.size],r&&(t=l.fV_);break;default:return e}return[{...o,media:[]},{product:{id:t,type:u.Uy},media:[i]}]};var p=r(353420),m=r(426774);let h=()=>(0,m.l)(p.ju[l.uyi]);var b=r(559044),y=r(531950),f=r(884378);let w="production"!==r(929143).env.NODE_CONFIG_ENV,N=e=>{var t,r,a,l,o,i;switch(e.paymentMethod){case n.L2:return{paymentId:e.id,expirationMonth:null==e||null==(t=e.creditCard)?void 0:t.expMonth,expirationYear:null==e||null==(r=e.creditCard)?void 0:r.expYear,maskedNumber:null==e||null==(a=e.creditCard)?void 0:a.maskedNumber,cardType:null==e||null==(l=e.creditCard)?void 0:l.type,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case n.RD:return{paymentId:e.id,bic:null==e||null==(o=e.sepaDirectDebit)?void 0:o.bic,maskedIBAN:null==e||null==(i=e.sepaDirectDebit)?void 0:i.maskedIban,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit};case n.ON:return{paymentId:e.id,isDefault:e.isDefault,paymentMethod:e.paymentMethod,businessUnit:e.businessUnit,email:e.email};default:return null}},C=e=>{let{paymentProfiles:t=[]}=e;return Array.isArray(t)&&0!==t.length?N(t.find(e=>!0===e.isDefault)||t[0]):null},g=e=>{let{orderItems:t=[],license:r,country:a="",debitableIdentifier:c,selectedShadowsOption:v}=e;return t.map(e=>{let{product:{id:t,eligibleForRebilling:p,seatCount:m,name:h=""}={},productType:y,assets:f,paymentMethod:w,subscriptionIdentifier:N,cancellationReason:C,cancellationReasonName:g}=e,P=N&&C?{subscription_identifier:N,cancellation_reason:C,...g&&{cancellation_reason_name:g}}:{},x=[];return m&&(P.seat_count=m),(null==w?void 0:w.type)!==n.gU&&(P.subscription_id=null==w?void 0:w.id),(null==f?void 0:f.length)&&(x=f.map(e=>{let{asset:t,selectedAssetSize:a}=e,n=(0,b.Ub)(t),l=(0,b.OJ)(t);return{type:n,id:t.id,license:r,...l&&{format:s.mx,size:s.mx,headline:t.title},...(null==a?void 0:a.size)&&{size:a.size},...(null==a?void 0:a.format)&&{format:a.format},...n===d.W1&&t.imageType===d.m$&&{angle:t.angle||o.R,content_provider:d._Y,...(null==a?void 0:a.format)!==i.yC&&{include_shadows:"on"===(v||"on").toLocaleLowerCase()}}}})),P.auto_renewal=p&&y===u.PZ&&!l.F7K.includes(a)&&!l.KGB.includes(h),P.debitable_identifier=c,{product:{id:t,type:y||u.Uy},...x&&{media:x},...Object.keys(P).length>0&&{meta:P}}})},P=e=>{let{currency:t,country:r,paymentProfileId:a,items:n,couponCode:l,vatNumber:o,promotions:i}=e;return{data:{type:"orders",attributes:{currency:t,items:n,country:r,payment_profile_id:a,coupons:l?[{type:"coupon",name:"coupon",coupon_code:l}]:[],client_data:{},vat_override:o||void 0,...i&&{promotions:i}}}}},x=async e=>{let{country:t,couponCode:r,currency:n,orderItems:l=[],selectedShadowsOption:o,paymentProfileId:i,vatNumber:s,configs:d={},license:c=u.sU,debitableIdentifier:p,promotions:m,isEligibleForUnlimitedBogoPromotion:b=!1,isFootageSelect:N=!1}=e,C=g({orderItems:l,license:c,country:t,debitableIdentifier:p,selectedShadowsOption:o});b&&(C=v(C,N));let x=(0,a._u)().formattedUrl,A=P({country:t,couponCode:r,promotions:b?h():m,currency:n,items:C,paymentProfileId:i,vatNumber:s});return y.Bn.post(x,A,{...d,...w&&{timeout:3e4}}).then(e=>({headers:e.headers,data:(0,f.A)(e.data)}))},A=e=>{let{orderItems:t=[],country:r="",debitableIdentifier:a}=e;return t.map(e=>{let{product:{id:t,license:o,name:i="",productType:d,eligibleForRebilling:c,seatCount:v}={},assets:p,paymentMethod:m}=e,h={...v&&{seat_count:v},...(null==m?void 0:m.type)!==n.gU&&{subscription_id:null==m?void 0:m.id}},y=[];return(null==p?void 0:p.length)&&(y=p.map(e=>{let{asset:t,selectedAssetSize:r}=e,a=(0,b.OJ)(t);return{type:(0,b._$)(t),id:t.id,license:o,...a&&{format:s.mx,size:s.mx,headline:t.title},...(null==r?void 0:r.size)&&{size:r.size},...(null==r?void 0:r.format)&&{format:r.format}}})),h.auto_renewal=c&&d===u.PZ&&!l.F7K.includes(r)&&!l.KGB.includes(i),h.debitable_identifier=a,{product:{id:t,type:d||u.Uy},...y&&{media:y},...Object.keys(h).length>0&&{meta:h}}})},_=async e=>{let{country:t,currency:r,orderItems:n,paymentProfileId:l,vatNumber:o,configs:i={},debitableIdentifier:s,promotions:d}=e,u=A({orderItems:n,country:t,debitableIdentifier:s}),c=(0,a._u)().formattedUrl,v=P({country:t,currency:r,items:u,paymentProfileId:l,vatNumber:o,promotions:d}),p=await y.Bn.post(c,v,{...i,...w&&{timeout:3e4}});return{headers:p.headers,data:(0,f.A)(p.data)}}},948695:(e,t,r)=>{r.r(t),r.d(t,{BuyAndDownloadButton:()=>h});var a=r(406029),n=r(464839),l=r(513372),o=r(485650),i=r(532850),s=r(808059),d=r(882431),u=r(580030),c=r(911449),v=r(30721),p=r(52492);let m=(e,t)=>(0,u.OK)(e)?o.rTe:o.or1[t],h=e=>{let{asset:t,assetSizeStateId:r,assetType:o,buttonConfig:u={showIcon:!0,variant:"contained",color:"secondary"},clickAnalyticsLabel:h,clickAnalyticsLabelMap:b,label:y,orderFlow:f=d.Y.UNLIMITED_CONVERSION_PANEL,product:w,setStateOnLoggedOutClick:N,termsCheckboxStateId:C,shouldUseSignupModal:g=!0}=e,P=(0,v.i9)(),{setStates:x}=(0,s.h6)(),A=(0,s.Cw)(r),_=(0,s.Cw)(C??"")??!0,D=m(t,o),{isCreateOrderInProgress:k,createOrderHandler:I,createOrderHandlerLoading:B}=(0,c.s)({orderFlow:f,productType:i.PZ,asset:t,productOverride:w,shouldForceAsset:!0,assetSize:A,license:D}),L=k||B||!_;return(0,a.jsxs)(l.$n,{"aria-label":y,disabled:L,fullWidth:!0,onClick:()=>{!P&&g?x(N):I()},labelTrack:(null==b?void 0:b[(null==w?void 0:w.name)||""])||h,variant:u.variant,color:u.color,style:{marginBottom:"8px"},children:[k&&(0,a.jsx)(n.A,{color:"inherit",size:24,style:{position:"absolute"}}),u.showIcon&&(0,a.jsx)(p.Download,{style:{padding:"2px",marginRight:"4px"}}),y]})}}}]);
//# sourceMappingURL=BuyAndDownloadButton.27d0ce43e26e364f.js.map